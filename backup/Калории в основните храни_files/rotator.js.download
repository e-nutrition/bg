function showbanner(li) {
    //Set Variables
    var imgAlt = li.find('img.preld').attr("alt");
    var img_src = li.find('img.preld').attr("src");
    var ahref = li.find('a').attr("href");
    //var imgTitle = li.find('a').attr("href"); //Get Main Image URL
    var imgDesc = li.find('.block').html();  //Get HTML of the "block" container
    var imgDescHeight = $(".main_image").find('.block').height(); //Find the height of the "block"

    if (li.is(".active")) {  //If the list item is active/selected, then...
        return false; // Don't click through - Prevents repetitive animations on active/selected list-item
    } else { //If not active then...
        //Animate the Description
        $(".main_image .block").animate({ opacity: 0, marginBottom: -imgDescHeight }, 150, function () { //Pull the block down (negative bottom margin of its own height)
            $(".main_image .block").html(imgDesc).animate({ opacity: 0.85, marginBottom: "0" }, 150); //swap the html of the block, then pull the block container back up and set opacity
            $(".main_image img").hide();
            $(".main_image img").attr({ src: img_src, alt: imgAlt });
            $(".main_image img").fadeIn(800, "swing");
            $(".main_image a").attr({ href: ahref });
        });
    }
    //Show active list-item
    $(".image_thumb ul li").removeClass('active'); //Remove class of 'active' on all list-items
    li.addClass('active');  //Add class of 'active' on the selected list
    return false;
}

$(document).ready(function () {   
    $(".main_image .desc").show(); //Show Banner
    $(".main_image .block").animate({ opacity: 0.85 }, 1); //Set Opacity
    $(".image_thumb ul li:first").addClass('active'); //Add the active class (highlights the very first list item by default)
    $(".image_thumb ul li").mouseover(function () {
        showbanner($(this));
    });

    $(".image_thumb ul li").hover(function () { //Hover effects on list-item
        $(this).addClass('hover'); //Add class "hover" on hover
    }, function () {
        $(this).removeClass('hover'); //Remove class "hover" on hover out
    });

    $("a.collapse").click(function () {
        $(".main_banner .block").slideToggle(); //Toggle the description (slide up and down)
        $("a.collapse").toggleClass("show"); //Toggle the class name of "show" (the hide/show tab)
    });

    setInterval("slideSwitch()", 5000);
});


function slideSwitch() {
    var $active = $('.image_thumb li.active');
    var $next = $active.next(".image_thumb ul li");
    if ($next.length == 0) {
        $next = $('.image_thumb ul li:first');
    }

    $active.removeClass('active');
    $active.addClass('active');

    showbanner($next);
}