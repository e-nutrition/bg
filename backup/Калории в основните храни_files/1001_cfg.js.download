var root_folder = 'https://www.1001recepti.com/';


function init_mce (mce)
{
	mce.init({
		theme : "advanced",
		mode : "none",
		plugins : "bbcode,emotions,inlinepopups",
		theme_advanced_buttons1 : "emotions,bold,italic,underline,undo,redo,link,unlink,image,forecolor,removeformat,cleanup,code",
		theme_advanced_buttons2 : "",
		theme_advanced_buttons3 : "",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "center",
		cleanup_callback : "myCustomCleanup",
		content_css : "css/bbcode.css",
		entity_encoding : "raw",
		remove_linebreaks : false,
		inline_styles : false,
		convert_fonts_to_spans : false,
		remove_redundant_brs : false,
		add_unload_trigger : true,
		fix_content_duplication : false,
		cleanup_on_startup : true,	//Eto tova e super sustestveno pri update za da ne premahnva novite redove		
		content_css : root_folder + "css/tinymce.css" //Eto tova pravi chudesa - maha gadnite page breakove!
	})
}


function myCustomCleanup(type, value) {
	switch (type) {
		case "get_from_editor":
			//value = value.replace('\n\n\n', '\n \n');			
			
			while(value.indexOf("\n\n\n") != -1)
			{
				value = value.replace("\n\n\n", "\n \n");	//kogato se postva slaga 3 novi reda
			}
			
			while(value.indexOf("\n\n") != -1)
			{
				value = value.replace("\n\n", "\n \n");		//kogato se editva obache sa 2
			}
			
			////alert("Value HTML string 1: " + value);
			// Do custom cleanup code here
			//value = value.replace('\n \n', '\n\n');
			
			//value = value.replace('\n\n', '\n&nbsp;\n');
			//value = value.replace('\n\n', '\n&nbsp;\n');
			break;
		case "insert_to_editor":
			//alert("Value HTML string 2: " + value);
			// Do custom cleanup code here
			break;
		case "submit_content":
			//alert("Value HTML Element 3: " + value);
			// Do custom cleanup code here
			break;
		case "get_from_editor_dom":
			//alert("Value DOM Element 4" + value);
			// Do custom cleanup code here
			break;
		case "insert_to_editor_dom":
			//alert("Value DOM Element: 5" + value);
			// Do custom cleanup code here
			break;
		case "setup_content_dom":
			//alert("Value DOM Element: 6" + value);
			// Do custom cleanup code here
			break;
		case "submit_content_dom":
			//alert("Value DOM Element: 7" + value);
			// Do custom cleanup code here
			break;
	}

	return value;
}




function init_mce1 (mce)
{
	mce.init({
		theme : "advanced",
		mode : "none",
		plugins : "bbcode,emotions,inlinepopups",
		theme_advanced_buttons1 : "emotions,bold,italic,underline,undo,redo,link,unlink,image,forecolor,removeformat,code",
		theme_advanced_buttons2 : "",
		theme_advanced_buttons3 : "",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "center",
		content_css : "css/bbcode.css",
		entity_encoding : "raw",
		remove_linebreaks : false,
		inline_styles : false,
		convert_fonts_to_spans : false,
		force_br_newlines : false,
		force_p_newlines : false,
		remove_redundant_brs : false,
		fix_content_duplication : false,
		save_callback : "myCustomSaveContent",
		cleanup_callback : "myCustomCleanup",
		verify_html : false,
		cleanup_on_startup : true,	//Eto tova e super sustestveno pri update za da ne premahnva novite redove
		convert_newlines_to_brs : false,
		content_css : root_folder + "css/tinymce.css" //Eto tova pravi chudesa - maha gadnite page breakove!
		
		
   	//forced_root_block : '1' // Needed for 3.x		   	
	})
}
