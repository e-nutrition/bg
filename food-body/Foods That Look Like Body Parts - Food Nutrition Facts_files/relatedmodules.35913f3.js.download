(window.webpackJsonp=window.webpackJsonp||[]).push([["modules/relatedmodules"],{"207d4364e4b5a66ba09b":function(e,t,i){"use strict";(function(e){t.a=e.Collection.extend({endpoint:"ajax/related"})}).call(this,i("292bef011bf0a540c727"))},"5c4508f6ca32cdacdbb2":function(e,t,i){"use strict";i.r(t),function(e,d){var a=i("7ec90be294f8945e7663"),l=i("d46c288b6d4387f2b7de"),n=i("891a19eb7d3552f95f46"),o=i("abfbe0c0349d83b0558c"),s=i("207d4364e4b5a66ba09b"),c=i("654adc4d2d3e5dbaee18");t.default=e.View.extend({el:"body",initialize:function(){this.setVariables(),this.setListeners(),this.collectRelatedIds()},setVariables:function(){this.overrideDefaults({itemModel:l.a.prototype.ModelTemplate,itemView:l.a,moduleTemplate:"#related-module-template",mediaLoader:null}),this.logger=new n.a("RelatedModules"),this.collection=new s.a([],{model:this.itemModel}),this.mediaLoader=Object(c.d)(this.mediaLoader,o.default),this.contentId=a.a.getValue("content.id"),this.$content=d(".content-container"),this.$relatedModules=this.$content.find("[data-embed=related]"),this.relatedIdList=[]},setListeners:function(){this.collection.on("sync",this.handleSync.bind(this))},handleSync:function(){var e=this.itemView;this.logger.log("Sync",arguments),this.collection.each(function(t){var i=d(new e({model:t,templateSelector:this.moduleTemplate}).render().el),a=t.getAttributeFromData("id"),l=this.$content.find("[data-related-id="+a+"]");l.length&&l.replaceWith(i)}.bind(this))},fetchModules:function(){return this.contentId&&this.relatedIdList.length?(this.collection.fetch({data:{id:this.relatedIdList.join(",")}}).fail(this.handleFetchError.bind(this)),!0):(this.logger.log("No modules to load."),!1)},handleFetchError:function(){this.logger.error("Error fetching related modules."),this.$relatedModules.remove()},collectRelatedIds:function(){var e=[];this.$relatedModules.each((function(){var t=d(this),i=t.data("related-id")?t.data("related-id"):"";e.push(i)})),this.relatedIdList=e}})}.call(this,i("292bef011bf0a540c727"),i("4124695a4a0df23fd56c"))}}]);
//# sourceMappingURL=relatedmodules.35913f3.js.map